(function(require){var config={"blocks":{"cat":"Kategorie","suggest":"Suchvorschl\u00e4ge","vendor":"Hersteller","product":"Produkte","promotion":"Empfehlungen","landingpage":"Inhalte","allResult":"Alle Ergebnisse anzeigen f\u00fcr:","ordernumber":"Artikelnummer:"},"autocompleteType":"result_v3","autocompleteLayout":"Classic","autocompleteMobileMaxWidth":"40em","mobileSmartSuggest":{"config":{"suggestType":"suggest","enabled":!0,"voiceSearchEnabled":!0,"primaryColor":"#00a0e7","submitColor":"#fff","suggestionsForEmptyQuery":"topQueries"},"text":{"searchPlaceholder":"Suchen","noResults":"Keine genauen Ergebnisse","showRelatedResults":"\u00c4hnliche Ergebnisse anzeigen","voiceSearchError":"Spracherkennung fehlgeschlagen. Bitte pr\u00fcfen Sie, ob der Browser berechtigt ist, auf das Mikrofon zuzugreifen."}},"searchFieldName":"searchParam","searchFieldSelector":"input[name=\"searchParam\"][type=\"text\"],input[name=\"searchParam\"][type=\"search\"]","defaultSearchFieldSelectors":["input[name=\"Params[SearchParam]\"][type=\"text\"]","input[name=\"searchparam\"][type=\"text\"]","input[name=\"keywords\"][type=\"text\"]","input[name=\"q\"][type=\"text\"]","input[name=\"sSearch\"][type=\"text\"]","input[name=\"search_input\"][type=\"text\"]","input[name=\"SearchStr\"][type=\"text\"]","input[name=\"query\"][type=\"text\"]","input[name=\"Params[SearchParam]\"][type=\"search\"]","input[name=\"searchparam\"][type=\"search\"]","input[name=\"keywords\"][type=\"search\"]","input[name=\"q\"][type=\"search\"]","input[name=\"sSearch\"][type=\"search\"]","input[name=\"search_input\"][type=\"search\"]","input[name=\"SearchStr\"][type=\"search\"]","input[name=\"query\"][type=\"search\"]","#flAutocompleteInputText"],"autocompleteProxy":"\/\/service.findologic.com\/ps\/edeka24.de\/autocomplete.php","useAutocompleteProxy":!1,"currency":"\u20ac","shopSystem":"oxid","cssFile":["\/\/cdn.findologic.com\/login.symfony\/web\/autocomplete\/351281F73393B3423BF7298E79845C29\/fl_smart_suggest.css"],"configUrl":"\/\/cdn.findologic.com\/login.symfony\/web\/autocomplete\/351281F73393B3423BF7298E79845C29\/config.json","frontendConfig":{"useJQueryUiCss":!1,"frontendType":"HTML_3.1"},"showLogo":!0,"debugMode":1,"shopkey":"5E2E8F6D14524495E2B2724DDAF297DF","shopUrl":"www.edeka24.de","language":"de","hashedShopkey":"351281F73393B3423BF7298E79845C29","useTwoColumnLayout":!0,"status":"active","isStagingShop":!1,"directIntegration":{"enabled":!0,"frontend":"\/\/service.findologic.com\/ps\/edeka24.de\/\/","navigationType":0,"callbacks":{"init":"function directIntegrationInitCallback(response) { \/*flRequire(['config', 'jquery-nc', 'flUtils', 'svgInjector', 'modules\/mobile-smart-suggest', 'modules\/request'], function (                                          \r\n          config, jQuery, utils, SVGInjector, MobileSmartSuggest, Request) {     \r\n\r\n    var settings = {\r\n        suggestionCount: 9\r\n    };\r\n    var mss = new MobileSmartSuggest(settings);                                                                                                                                                                                                                                                                                                           \r\n    mss.updateSuggestions = function (query, suggestionTypes) {   \r\n        var self = this;\r\n        var request = new Request({\r\n            onSuccess: function (response) {\r\n                \/\/ In case the response was proxied, it may be returned as text, so we have to parse it first.\r\n                if (typeof response !== 'object') {\r\n                    response = JSON.parse(response);\r\n                }\r\n\r\n                \/\/ If the response does not deliver any results, we manipulate the result that it will display a\r\n                \/\/ no-results text.\r\n                if (response.length === 0 && query.length !== 0) {\r\n                    response = [{\"label\": self.settings.noResultsText, \"noresult\": true}];\r\n                }\r\n                \r\n                \/\/ ADAPTION start\r\n                jQuery.each(response, function(index, value) {\r\n                    if (value.label.toLowerCase() === 'mochi') {\r\n                        response.splice(index, 1);\r\n                        return false;\r\n                    }\r\n                });\r\n                \r\n                if(response.length > 8) {\r\n                    response.length = 8;\r\n                }\r\n                \/\/ ADAPTION end\r\n                \r\n                var suggestionsHtml = self.responseToHtml(response, query);\r\n                self.installSuggestionHandlers(suggestionsHtml);\r\n\r\n                jQuery('.fl-mobile-smart-suggest .fl-suggestions').html(suggestionsHtml);\r\n            },\r\n            onError: function () {\r\n                self.clearSuggestions();\r\n            },\r\n            onTimeout: function () {\r\n                self.clearSuggestions();\r\n            }\r\n        });\r\n\r\n        var params = {};\r\n        jQuery.each(jQuery('.fl-mobile-smart-suggest form').serializeArray(), function (key, param) {\r\n            params[param.name] = param.value;\r\n        });\r\n\r\n        \/\/ Those params can not be overwritten.\r\n        var defaultParams = {\r\n            query: query,\r\n            q: query,\r\n            type: this.settings.type,\r\n            autocompleteblocks: suggestionTypes,\r\n            count: this.settings.suggestionCount\r\n        };\r\n\r\n        request.send(Request.TYPE_SUGGEST, jQuery.extend({}, params, defaultParams));\r\n\r\n        \/\/ Scroll to top when suggestions have been updated.\r\n        jQuery('.fl-suggestions').scrollTop(0);             \r\n    };\r\n\r\n    if (!utils.isMobile(config)) {\r\n        mss.destroy();\r\n    } \r\n});*\/\r\n\r\njQuery('form[name=\"search\"]').on('search', function() {\r\n    sessionStorage.removeItem('flFilterMobile');\r\n});\r\n\r\njQueryFl('.search-toggle').click(function(event){\r\n    event.preventDefault();\r\n    event.stopImmediatePropagation();\r\n    \r\n    setTimeout(function(){ \r\n        jQueryFl('form[name=\"search\"] input[name=\"searchparam\"]').focus();\r\n\r\n        jQueryFl('.search-toggle').removeClass('open');\r\n        jQueryFl('form[name=\"search\"] input[name=\"searchparam\"]').parents('.searchBox-Container').slideUp();\r\n    }, 200);\r\n});\r\n\r\nvar firstSuggestion;\r\nvar query = \"\";\r\nvar landingpage;\r\nvar topQueries = [];\r\nvar fixedQueries = ['bier', 'chips', 'honig', 'lillet', 'milch', 'oliven\u00f6l', 'rotwein', 'storck', 'schokolade', 'tomaten', 'vodka'];\r\n\r\nwindow.sizeInEm = jQuery(window).width() \/ parseFloat(jQuery(\"body\").css(\"font-size\"));\r\n\r\nwindow.initFunctions = {\r\n    getProductSuggestions: function (additionalParams) {\r\n        flRequire(['config', 'directIntegration', 'flUtils', 'flAutocomplete'], function (config, directIntegration, utils, flAutocomplete) {\r\n            \/\/select focused search field\r\n            var searchFields = jQuery('input[name=\"searchparam\"]');\r\n            var searchField = jQuery('input[name=\"searchparam\"]:focus');\r\n            var suggestionField = jQuery('.fl-autosuggestion-field');\r\n            var forceQuery = false;\r\n            var firstSuggestion_tmp;\r\n\r\n            query = jQuery(searchField).val();\r\n            landingpage = null;\r\n\r\n            \/\/sync value of searchfields\r\n            jQuery(searchFields).val(query);\r\n\r\n            \/\/check for additionalParams when user interacts with the search\r\n            if (typeof additionalParams !== 'undefined') {\r\n                if (typeof additionalParams.query !== 'undefined') {\r\n                    query = additionalParams.query;\r\n                    jQuery(searchFields).val(query);\r\n                    forceQuery = true;\r\n                }\r\n            }\r\n\r\n            var data = {\r\n                usergrouphash: flAutocomplete.usergrouphash,\r\n                shopkey: config.shopkey,\r\n                query: query\r\n            };\r\n\r\n            \/\/topQueries on initial click\r\n            if (query.length === 0) {\r\n                data.autocompleteblocks = ['topQueries'];\r\n            }\r\n            \/\/suggestions and landingpages on search\r\n            else {\r\n                \/\/data.autocompleteblocks = ['suggest', 'vendor', 'cat', 'landingpage'];\r\n                data.autocompleteblocks = ['suggest', 'landingpage'];\r\n            }\r\n\r\n            jQuery.ajax({\r\n                url: 'https:\/\/service.findologic.com\/ps\/edeka24.de\/autocomplete.php?',\r\n                type: \"GET\",\r\n                data: data,\r\n                success: function (data) {\r\n                    \/\/set suggestion\r\n                    if (data.length === 0 || forceQuery) {\r\n                        firstSuggestion_tmp = query;\r\n                    } else if (query.length && (isFixedQuery(query) > -1)) {\r\n                        firstSuggestion_tmp = fixedQueries[isFixedQuery(query)];\r\n                    } else if (data[0].block === 'topQueries') {\r\n                        firstSuggestion_tmp = '';\r\n                    } else if (data[0].block === 'landingpage') {\r\n                        \/\/only suggest landing page if name starts with query\r\n                        if(data[0].label.toLowerCase().indexOf(query.toLowerCase()) === 0) {\r\n                            firstSuggestion_tmp = data[0].label;\r\n                        } else {\r\n                            firstSuggestion_tmp = query;\r\n                        }\r\n                    } else {\r\n                        firstSuggestion_tmp = data[0].label;\r\n                    }\r\n\r\n                    topQueries = [];\r\n                    data.forEach(function (element) {\r\n                        if (element.label !== 'st\u00fcck' && element.label !== 'st\u00fcck edeka') {\r\n                            topQueries.push(element);\r\n                            \/\/check if any element contains query as word (resolve bug where the query Milch gets the suggestion Milchreis)\r\n                            if (element.label.toLowerCase().indexOf(query.toLowerCase() + ' ') >= 0 && query.length > 2)\r\n                                firstSuggestion_tmp = query;\r\n                        }\r\n                    });\r\n\r\n                    landingpageIndex = hasLandingpage();\r\n\r\n                    \/\/search for landingpage\r\n                    if (landingpageIndex !== -1) {\r\n                        landingpage = topQueries[landingpageIndex];\r\n                    }\r\n\r\n                    var trimmed = query.trim();\r\n                    var sliced = firstSuggestion_tmp.slice(trimmed.length);\r\n\r\n                    var suggestionText = trimmed + sliced;\r\n\r\n                    \/\/check if suggestion starts with query, otherwise don't autocomplete\r\n                    \/*if(firstSuggestion_tmp.toLowerCase().indexOf(trimmed.toLowerCase()) === 0) {\r\n                        suggestionField.val(suggestionText);\r\n                    } else {\r\n                        suggestionField.val('');\r\n                    }*\/\r\n                },\r\n                error: function (data) {\r\n                    firstSuggestion_tmp = query;\r\n                },\r\n                complete: function (data) {\r\n                    \/\/only trigger search when the suggestion changes or when user interacts with nav bar\r\n                    if (firstSuggestion_tmp !== firstSuggestion || typeof additionalParams !== \"undefined\") {\r\n\r\n                        \/\/save current parameters\r\n                        var queryString = window.location.hash.slice(window.location.hash.indexOf('#search:') + 8);\r\n                        var origParameters = utils.parseQueryString(queryString);\r\n\r\n                        \/\/Go back to first page when there are new products\r\n                        if(firstSuggestion_tmp !== firstSuggestion) {\r\n                            origParameters.first = 0;\r\n                        }\r\n\r\n                        \/\/set global firstSuggestion\r\n                        firstSuggestion = firstSuggestion_tmp;\r\n\r\n                        \/\/override query\r\n                        origParameters.query = firstSuggestion;\r\n                        origParameters.searchparam = firstSuggestion;\r\n\r\n                        \/\/combine parameter objects\r\n                        if (typeof additionalParams === \"undefined\")\r\n                            additionalParams = {};\r\n\r\n                        var parameters = jQuery.extend(origParameters, additionalParams);\r\n\r\n                        \/\/remove inital click parameters\r\n                        if (parameters.initialClick) {\r\n                            delete parameters.count;\r\n                            delete parameters.initialClick;\r\n                            delete parameters.order;\r\n                        }\r\n\r\n                        \/\/delete parameter when query should not be forced anymore (typing after forcing)\r\n                        if (!forceQuery) {\r\n                            delete parameters.forceOriginalQuery;\r\n                        }\r\n\r\n                        \/\/re add initial click settings on empty query\r\n                        if (!query) {\r\n                            parameters = {\r\n                                initialClick: 1,\r\n                                count: 10,\r\n                                order: 'salesfrequency desc',\r\n                                \/\/ this parameter prevents query logging in Hugo and thus prevents it from being tracked\r\n                                skipQueryLogging: true\r\n                            };\r\n                        }\r\n                        \/\/parameters for every request\r\n                        parameters.returnResultsForLandingpages = true;\r\n\r\n                        var newQueryString = jQuery.param(parameters);\r\n                        \/\/call DI\r\n                        directIntegration.loadContent('search', newQueryString);\r\n                    }\r\n                    \/\/still reload topQueries, when more than one product is shown (otherwise called in SSC)\r\n                    else if (jQuery('.product-item').length > 1 || landingpage) {\r\n                        window.initFunctions.addTopQueries();\r\n                    }\r\n                    \/\/delete everthing otherwise\r\n                    else {\r\n                        window.initFunctions.removeTopQueries();\r\n                    }\r\n                }\r\n            });\r\n        });\r\n    },\r\n\r\n    addTopQueries: function () {\r\n        flRequire(['flUtils'], function (utils) {\r\n            \/\/ Remove topQueries during Corona\r\n            if (query.length === 0) {\r\n                window.initFunctions.removeTopQueries();\r\n                return;\r\n            }\r\n            \r\n            if (topQueries.length === 0 ||\r\n               (jQuery('.product-item').length <= 1 && hasLandingpage() === -1)) {\r\n                window.initFunctions.removeTopQueries();\r\n                return;\r\n            }\r\n\r\n            var queries = jQuery('<div class=\"container-fluid fl-top-queries\">');\r\n            topQueries.length = 5;\r\n\r\n            \/\/generate href base-link\r\n            var queryString = window.location.hash.slice(window.location.hash.indexOf('#search:') + 8);\r\n            var parsedQueryString = utils.parseQueryString(queryString);\r\n\r\n            delete parsedQueryString.query;\r\n\r\n            var newQueryString = jQuery.param(parsedQueryString);\r\n\r\n            \/\/set title of topQuery bar\r\n            var topQueriesTitle = query ? 'Suchen nach:' : 'Aktuell beliebte Suchen:';\r\n            queries.append('<h1 class=\"fl-top-queries-title\">' + topQueriesTitle + '<\/h1>');\r\n\r\n            \/\/add current query if available\r\n            if(query &&\r\n               !parsedQueryString.forceOriginalQuery &&\r\n               query.toLowerCase() !== topQueries[0].label.toLowerCase()) {\r\n                queries.append(\r\n                    jQuery('<div class=\"fl-top-query\">').append(\r\n                        jQuery('<a>').attr('id', 'currentQuery').attr('href', '#search:' + newQueryString + '&query=' + query).attr('rel', 'nofollow').append(\r\n                            jQuery('<i class=\"fas fa-search\"><\/i>')).append(\r\n                            jQuery('<div>').append(\r\n                                jQuery('<span class=\"fl-top-query-name\">').text(cutLongQueriesAtBeginning(query)))\r\n                        )));\r\n\r\n                topQueries.length = 4;\r\n            }\r\n\r\n            \/\/ move landingpage to bar, if not already present\r\n            if (landingpage && hasLandingpage() === -1) {\r\n                topQueries.pop();\r\n                topQueries.push(landingpage);\r\n            }\r\n\r\n            \/\/add topQueries\r\n            topQueries.forEach(function (element) {\r\n                var icon;\r\n\r\n                if (element.block === 'vendor' || element.block === 'cat') {\r\n                    icon = 'tag';\r\n                } else if (element.block === 'landingpage') {\r\n                    icon = 'link';\r\n                } else {\r\n                    icon = 'search';\r\n                }\r\n\r\n                if (element.block === 'landingpage') {\r\n                    queries.append(\r\n                        jQuery('<div class=\"fl-top-query fl-landing-page\">').append(\r\n                            jQuery('<a>').attr('href', element.url).attr('rel', 'nofollow').append(\r\n                                jQuery('<i class=\"fas fa-' + icon + '\"><\/i>')).append(\r\n                                jQuery('<div>').append(\r\n                                    jQuery('<span class=\"fl-top-query-name\">').text(cutLongQueriesAtBeginning(element.label)))\r\n                            )));\r\n                } else {\r\n                    queries.append(\r\n                        jQuery('<div class=\"fl-top-query\">').append(\r\n                            jQuery('<a>').attr('href', '#search:' + newQueryString + '&query=' + element.label).attr('rel', 'nofollow').append(\r\n                                jQuery('<i class=\"fas fa-' + icon + '\"><\/i>')).append(\r\n                                jQuery('<div>').append(\r\n                                    jQuery('<span class=\"fl-top-query-name\">').text(cutLongQueriesAtBeginning(element.label)))\r\n                            )));\r\n                }\r\n            });\r\n\r\n            \/\/set handlers\r\n            queries.find('.fl-top-query:not(.fl-landing-page) a').each(function () {\r\n                var link = jQuery(this).attr('href');\r\n                var queryString = link.substring(8);\r\n                var parsedQueryString = utils.parseQueryString(queryString);\r\n                parsedQueryString.forceOriginalQuery = 1;\r\n                jQuery(this).click(function (event) {\r\n                    event.preventDefault();\r\n                    window.initFunctions.getProductSuggestions(parsedQueryString);\r\n                });\r\n            });\r\n\r\n            \/\/add or override container\r\n            if(!jQuery('.fl-top-queries').length) {\r\n                queries.hide().insertBefore(jQuery('.fl-result')).slideDown();\r\n            } else {\r\n                jQuery('.fl-top-queries').html(queries.children());\r\n            }\r\n        });\r\n    },\r\n\r\n    removeTopQueries: function () {\r\n        jQuery('.fl-top-queries').slideUp({\r\n            complete: function () {jQuery('.fl-top-queries').remove();}\r\n        });\r\n    }\r\n};\r\n\r\n\/\/screen width in em\r\nif(window.sizeInEm > 40) {\r\n    flRequire(['config', 'directIntegration', 'flUtils'], function (config, directIntegration, utils) {\r\n\r\n        \/* OVERRIDE CORE FUNCTION *\/\r\n        directIntegration.onHashChangeLoadContent = function () {\r\n            var hashQuery = directIntegration.getHashQuery();\r\n\r\n            return hashQuery.type;\r\n        };\r\n\r\n        \/\/load search when going back or forward in the browser\r\n        window.addEventListener('popstate', function (event) {\r\n            if(!config.searchFieldElement.is(\":focus\")) {\r\n                var queryString = window.location.hash.slice(window.location.hash.indexOf('#search:') + 8);\r\n                var parsedQueryString = utils.parseQueryString(queryString);\r\n\r\n                window.initFunctions.getProductSuggestions(parsedQueryString);\r\n            }\r\n        });\r\n\r\n        \/\/Control input field focus on scroll\r\n        var scrollTimeout;\r\n\r\n        \/\/ Listen for resize events\r\n        jQuery(window).scroll(function (event) {\r\n            clearTimeout(scrollTimeout);\r\n\r\n            scrollTimeout = setTimeout(function () {\r\n                if(jQuery('.sticky-header.sticky').length && jQuery('#searchParam:focus').length) {\r\n                    jQuery('#searchParamSticky').focus();\r\n                    jQuery(\"#searchParamSticky:text:visible:first\").focus();\r\n                } else if (jQuery('.sticky-header:not(.sticky)').length && jQuery('#searchParamSticky:focus').length) {\r\n                    jQuery('#searchParam').focus();\r\n                    jQuery(\"#searchParam:text:visible:first\").focus();\r\n                }\r\n            }, 50);\r\n        });\r\n\r\n        \/\/load search when calling search URL directly\r\n        jQuery(document).ready(function (event) {\r\n            if(window.location.hash) {\r\n                var queryString = window.location.hash.slice(window.location.hash.indexOf('#search:') + 8);\r\n                var parsedQueryString = utils.parseQueryString(queryString);\r\n\r\n                window.initFunctions.getProductSuggestions(parsedQueryString);\r\n            }\r\n        });\r\n\r\n        \/\/when the search is clicked before rendering\r\n        if (config.searchFieldElement.is(\":focus\") || config.searchFieldElement.val()) {\r\n            window.initFunctions.getProductSuggestions();\r\n        }\r\n\r\n        \/\/set suggestion fields\r\n        jQuery(config.searchFieldElement).each(function(index, searchField) {\r\n            \/*\r\n            * Put another search field below the existing one to display the current\r\n            * suggestion.\r\n            *\/\r\n            var suggestField = jQuery(searchField).clone();\r\n            suggestField.css({\r\n                color: 'silver',\r\n                'z-index': 470\r\n            });\r\n\r\n            suggestField.attr('placeholder', '');\r\n            suggestField.removeAttr('name');\r\n            suggestField.removeAttr('id');\r\n            suggestField.prop('disabled', true);\r\n            suggestField.insertAfter(searchField);\r\n            suggestField.addClass('fl-autosuggestion-field');\r\n            \/*\r\n            * Make the actual search field transparent so the suggestion field can be\r\n            * seen.\r\n            *\/\r\n            jQuery(searchField).css({\r\n                position: 'absolute',\r\n                background: 'transparent',\r\n                'z-index': 499\r\n            });\r\n\r\n            jQuery(searchField).on('input', function(event) {\r\n                window.initFunctions.getProductSuggestions();\r\n            });\r\n\r\n            var trackFindoResults = function(searchField) {\r\n                flRequire(['config', 'modules\/tracking\/analytics\/tracker'], function (config, AnalyticsTracker) {\r\n                    var query = jQuery(searchField.target).val();\r\n                    var analyticsTracker = AnalyticsTracker.getInstance(config, false);\r\n                    analyticsTracker.trackSearch(config.searchFieldName + '=' + query);\r\n                });\r\n            };\r\n            \/\/ track search request after 1 sec. if user stops typing\r\n            jQuery(searchField).on('input', debounce(trackFindoResults, 1000));\r\n\r\n            jQuery(searchField).keyup(function(event) {\r\n                \/\/ArrowRight\r\n                if (event.keyCode === 39 || event.keyCode === 9) {\r\n                    jQuery(searchField).val(firstSuggestion);\r\n                    window.initFunctions.getProductSuggestions();\r\n                }\r\n            });\r\n\r\n            jQuery(searchField).keydown(function(event) {\r\n                \/\/Tab\r\n                if (event.keyCode === 9) {\r\n                    event.preventDefault();\r\n\r\n                    jQuery(searchField).val(firstSuggestion);\r\n                    window.initFunctions.getProductSuggestions();\r\n                }\r\n                \/\/Prevent double space\r\n                else if (event.keyCode === 32 && query.endsWith(' ')) {\r\n                    event.preventDefault();\r\n                }\r\n            });\r\n\r\n            jQuery(searchField).keypress(function(event) {\r\n                \/\/Enter\r\n                if (event.keyCode === 13) {\r\n                    event.preventDefault();\r\n\r\n                    window.initFunctions.getProductSuggestions({query: query, forceOriginalQuery: 1});\r\n                }               \t\r\n            });\r\n\t\t\t\r\n            \/*jQueryFl(searchField).on(\"focus touchstart touchmove touchend mouseover mousemove mousedown mouseup click\", function(event) {\r\n                console.log(event.type);\r\n            });   \r\n            \r\n            searchField.addEventListener(\"focus\", function(event) {\r\n                if(event.relatedTarget === null) {\r\n                    window.initFunctions.getProductSuggestions();\r\n                }\r\n            });*\/\r\n\r\n            jQuery(searchField).on('focus',function(event) {\r\n                if(event.relatedTarget === null) {\r\n                    window.initFunctions.getProductSuggestions();\r\n                }\r\n            });\r\n        });\r\n    });\r\n}\r\n\r\nfunction isFixedQuery(query) {\r\n    var index = -1;\r\n\r\n    fixedQueries.forEach(function (value, i) {\r\n        if(value.indexOf(query.toLowerCase()) === 0)\r\n            index = i;\r\n    });\r\n\r\n    return index;\r\n}\r\n\r\nfunction hasLandingpage() {\r\n    var index = -1;\r\n\r\n    topQueries.forEach(function (element, curIndex) {\r\n        if (element.block === 'landingpage') {\r\n            index = curIndex;\r\n        }\r\n    });\r\n\r\n    return index;\r\n}\r\n\r\nfunction cutLongQueriesAtBeginning (text) {\r\n    var words = text.trim().split(' ');\r\n\r\n    if(query && words.length > 2)\r\n        text = '... ' + words.splice(-2).join(' ');\r\n\r\n    return text;\r\n}\r\n\r\n\/\/ Returns a function, that, as long as it continues to be invoked, will not\r\n\/\/ be triggered. The function will be called after it stops being called for\r\n\/\/ N milliseconds. If `immediate` is passed, trigger the function on the\r\n\/\/ leading edge, instead of the trailing.\r\nfunction debounce(func, wait, immediate) {\r\n    var timeout;\r\n    return function() {\r\n        var context = this, args = arguments;\r\n        var later = function() {\r\n            timeout = null;\r\n            if (!immediate) func.apply(context, args);\r\n        };\r\n        var callNow = immediate && !timeout;\r\n        clearTimeout(timeout);\r\n        timeout = setTimeout(later, wait);\r\n        if (callNow) func.apply(context, args);\r\n    };\r\n}; \n}","preSearch":"function directIntegrationPreSearchCallback(queryString) { var query = utils.parseQueryString(queryString);\r\n\r\nif((query.query === \"\" && query.searchparam !== \"\") || window.sizeInEm < 40)\r\n    query.query = query.searchparam;\r\n\r\ndelete query.searchparam;\r\n\r\nvar newQueryString = jQuery.param(query);\r\n\r\nreturn newQueryString; \n}","searchSuccess":"function directIntegrationSearchSuccessCallback(response, queryParams) { \/\/*********************************\/\r\n\/\/                                *\/\r\n\/\/     Callback Documentation     *\/\r\n\/\/                                *\/\r\n\/\/*********************************\/\r\n\r\n\/*\r\n#1. Template cleansing\r\n\tfunction: prepareShopTemplate()\r\n\r\n#2. FINDO Elements: SDYM implementation\r\n\tfunction: prepareFINDOTemplate()\r\n\r\n#3. FINDO Elements: custom per-page & sort\r\n\tfunction: prepareFINDOTemplate()\r\n\r\n#4. FINDO Elements: Clean item URLs from extra params\r\n    function: prepareFINDOTemplate()\r\n\r\n#5. FINDO Filters: Mobile filters reorganisation\r\n\tfunction: prepareFINDOTemplate()\r\n\r\n#6. FINDO Elements: Items AJAX add-to-cart custom\r\n\tfunction: postFINDOResults()\r\n*\/\r\nvar shopURL = window.location.origin + \"\/index.php?\";\r\n\r\nprepareShopTemplate();\r\nprepareFINDOTemplate(response);\r\n\r\nif(window.sizeInEm > 40) {\r\n    setLiveSearchHandlers(response);\r\n\r\n    jQuery('.fl-result').html(response);\r\n    postFINDOResults();\r\n\r\n    if (jQuery(response).find('#fl-landingpage').length > 0 &&\r\n        getURLParam('forceOriginalQuery')) {\r\n        window.location.replace(jQuery(response).find('#fl-landingpage').data('url'));\r\n    } else {\r\n        window.initFunctions.addTopQueries();\r\n    }\r\n\r\n    \/\/Scroll to top\r\n    window.scrollTo({\r\n        top: 0,\r\n        left: 0,\r\n        behavior: 'smooth'\r\n    });\r\n} else {\r\n    jQuery('.fl-result').html(response);\r\n    postFINDOResults();\r\n}\r\n\r\nfunction setLiveSearchHandlers(response) {\r\n    flRequire(['flUtils'], function (utils) {\r\n        jQuery(response).find('.fl-smart-did-you-mean a, .fl-sort a, .fl-per-page a, .fl-accordion-navigation:not(.fl-range-slider-filter-box) .fl-content a, .fl-pagination-container a').click(function (event) {\r\n            event.preventDefault();\r\n\r\n            var link = $(this).attr('href');\r\n            var queryString = \"\";\r\n\r\n            \/\/remove \"#search:\" from query string to get the right object\r\n            if (link.indexOf('#search:') === 0) {\r\n                queryString = link.substring(8);\r\n                var parsedQueryString = utils.parseQueryString(queryString);\r\n                window.initFunctions.getProductSuggestions(parsedQueryString);\r\n            }\r\n        });\r\n\r\n        jQueryFl('form.fl-range-slider').off('submit');\r\n        jQuery('form.fl-range-slider').submit(function(event){\r\n            event.preventDefault();\r\n            event.stopPropagation();\r\n            var parsedQueryString = utils.parseQueryString($(this).serialize());\r\n            window.initFunctions.getProductSuggestions(parsedQueryString);\r\n        });\r\n    });\r\n}\r\n\r\nfunction prepareShopTemplate() {\r\n    \/\/ Set FL library\r\n    window.FINDOLOGICLibrary = {};\r\n    FINDOLOGICLibrary.windowWidth = jQuery(window).width();\r\n\r\n    jQuery('body').removeAttr('style');\r\n    jQuery('body').addClass('fl-body');\r\n\r\n    \/\/ Remove titles of static pages\r\n    var staticTitles = [\r\n        'DeutschlandCard',\r\n        'Impressum',\r\n        'AGB',\r\n        'Datenschutz',\r\n        'Widerrufsbelehrung',\r\n        'Fragen und Antworten',\r\n        'Versandkosten',\r\n        'Retourensendung'\r\n    ];\r\n\r\n    jQuery.each(staticTitles, function( index, value ) {\r\n        if (jQuery('body > .container-fluid h1').text() === value) {\r\n            jQuery('body > .container-fluid h1').remove();\r\n        }\r\n    });\r\n}\r\n\r\nfunction prepareFINDOTemplate(response) {\r\n\r\n    \/* FIlter Manipulation \r\n    *\/\r\n    \/\/ For SDYM queries 2 of 3 (fl-corrected-query and fl-improved-query - after filter selection, remove SDYM container)\r\n    \/\/ For fl-did-you-mean-query leave SDYM container - due to redirection link\r\n    if (jQuery(response).find('.fl-chosen-filters-bar').length &&\r\n        jQuery(response).find('.fl-corrected-query').length) {\r\n\r\n        jQuery(response).find('.fl-sdym-wrapper').detach();\r\n        jQuery(response).find('.fl-query-message').removeAttr('style');\r\n    }\r\n\r\n    if (jQuery(response).find('.fl-chosen-filters-bar').length &&\r\n        jQuery(response).find('.fl-improved-query').length) {\r\n\r\n        jQuery(response).find('.fl-sdym-wrapper').detach();\r\n        jQuery(response).find('.fl-query-message').removeAttr('style');\r\n    }\r\n\r\n    \/\/ Price-filter filter value rounding\r\n    jQuery(response).find('.findologic-slider').each(function() {\r\n        jQuery(this).attr('data-min', Math.floor(jQuery(this).attr('data-min')));\r\n        jQuery(this).attr('data-max', Math.ceil(jQuery(this).attr('data-max')));\r\n        jQuery(this).attr('data-step', 1);\r\n    });\r\n\r\n    \/\/ Remove active class from fl-accordion elements - styling purposes\r\n    jQuery(response).find('.fl-main-filters .fl-accordion-navigation').each(function() {\r\n        jQuery(this).removeClass('fl-active');\r\n    });        \r\n\r\n    \/* Template Element Manipulation \r\n    *\/ \r\n\r\n    \/\/ stoken add to item form\r\n    var stoken = jQuery('form[name=\"search\"] input[name=\"stoken\"]').val();\r\n    jQuery(response).find('.fl-item-stoken').attr('value', stoken);\r\n\r\n    \/\/ Per-page active value rendering\r\n    if (getURLParam(\"count\")) {\r\n        var count = getURLParam('count');\r\n\r\n        jQuery(response).find('.fl-per-page-btn').html(count);\r\n    }\r\n\r\n    \/\/ Sort active value rendering\r\n    if (getURLParam('order')) {    \r\n        var order = getURLParam('order');\r\n\r\n        var sortSelectedValue = jQuery(response).find('.fl-sort-unordered-list li[data-value=\"' + order + '\"]').attr('data-value-placeholder');\r\n        jQuery(response).find('.fl-sort-btn').html(sortSelectedValue);\r\n    } else {\r\n        jQuery(response).find('.fl-sort-btn').html('Relevanz');\r\n    }\r\n\r\n    \/\/ Check if image is available - if not then set a no-image placeholder\r\n    jQuery(response).find('.fl-image').each(function() {\r\n        var imgURL = jQuery(this).find('a img').attr('src');\r\n        var noImgPlaceholder = jQuery(this).attr('data-no-image');\r\n        jQuery.ajax({\r\n            url: imgURL,\r\n            type:'HEAD',\r\n            error: function() {\r\n                \/\/jQuery(this).find('a img').attr('src', noImgPlaceholder);\r\n            }\r\n        });\r\n    });\r\n\r\n    \/\/ Clean item URLs from extra params\r\n    jQuery(response).find('.fl-title').each(function() {\r\n        var URL = jQuery(this).attr('href');\r\n        var newURL = URL.split('?');\r\n\r\n        jQuery(this).attr('href', newURL[0]);\r\n    });\r\n\r\n    \/\/ Mobile filters reorganisation\r\n    if (FINDOLOGICLibrary.windowWidth < 768) {\r\n\r\n        jQuery('.filter.fl-filters-placeholder').detach();\r\n        var filters = jQuery(response).find('.filter.fl-filters-placeholder').removeClass('open').detach();\r\n        jQuery('body').prepend(filters);\r\n\r\n        \/\/ Preserve open state of FINDOLOGIC filters on mobile\r\n        if (sessionStorage.getItem('flFilterMobile') === 'true' &&\r\n            !jQuery(response).find('.fl-no-results-suggestions').length) {\r\n\r\n            jQuery('.filter.fl-filters-placeholder').addClass('fl-open');\r\n            jQuery('body').addClass('fl-fixed');\r\n        } else {\r\n            jQuery('.filter.fl-filters-placeholder').removeClass('fl-open');\r\n            jQuery('body').removeClass('fl-fixed');\r\n        }\r\n    }\r\n}\r\n\r\nfunction postFINDOResults() {\r\n    \/\/ FINDO new sort button rotate arrow\r\n    jQuery('.fl-sort-btn').on('click', function() {\r\n        jQuery(this).toggleClass('fl-active');\r\n        jQuery('.fl-sort-unordered-list').toggleClass('fl-active');\r\n        jQuery('.fl-per-page').removeClass(\"fl-active\");\r\n    });\r\n\r\n    \/\/ Toggle per-page list\r\n    jQuery('.fl-per-page-btn').on('click', function(e) {\r\n        jQuery('.fl-per-page').toggleClass('fl-active');\r\n        jQuery('.fl-sort-btn').removeClass(\"fl-active\");\r\n        jQuery('.fl-sort-unordered-list').removeClass('fl-active');\r\n    });\r\n\r\n    \/\/ Remove visibility class from per-page when elsewhere is clicked\r\n    jQuery(document).on(\"click\", function(e) {\r\n        if (jQuery(e.target).is('.fl-per-page-btn') === false &&\r\n            jQuery(e.target).is('.fl-sort-btn') === false) {\r\n            jQuery('.fl-per-page').removeClass(\"fl-active\");\r\n            jQuery('.fl-sort-btn').removeClass(\"fl-active\");\r\n            jQuery('.fl-sort-unordered-list').removeClass('fl-active');\r\n        }\r\n    }); \r\n\r\n    jQuery('.fl-amount .plus').each(function() {\r\n        jQuery(this).on('click', function() {\r\n            var currentValue = parseInt(jQuery(this).parent().find('.form-group input').val());\r\n            currentValue += 1;\r\n\r\n            jQuery(this).parent().find('.form-group input').val(currentValue).trigger('change');\r\n        });\r\n    });\r\n\r\n    jQuery('.fl-amount .minus').each(function() {\r\n        jQuery(this).on('click', function() {\r\n            var currentValue = parseInt(jQuery(this).parent().find('.form-group input').val());\r\n            \/\/Prevent input from being 0\r\n            currentValue -= currentValue > 1 ? 1 : 0;\r\n\r\n            if (currentValue >= 0) {\r\n                jQuery(this).parent().find('.form-group input').val(currentValue).trigger('change');\r\n            }\r\n        });\r\n    });\r\n\r\n    jQuery('.fl-list-item').each(function() {\r\n        var $this = jQuery(this);\r\n\r\n        \/\/Limit order amount\r\n        $this.find('.fl-amount .form-group input[data-iamountlimit]').change(function(event) {\r\n            var limit = jQuery(event.target).attr('data-iamountlimit');\r\n            var value = parseInt($(event.target).val(), 10);\r\n            \r\n            if(value >= limit && limit) {\r\n                $(event.target).val(limit);\r\n                $this.find('.stock-am-limit-message').show();\r\n            } else {\r\n                $this.find('.stock-am-limit-message').hide();\r\n            }\r\n        });\r\n\r\n        \/\/ AJAX add-to-cart custom\r\n        $this.find('.fl-add-to-cart-button').on('click', function() {\r\n            var anid = $this.find('input[name=\"anid\"]').val(),\r\n                stoken = $this.find('.fl-item-stoken').val(),\r\n                url = shopURL,\r\n                amountInput = $this.find('.fl-input-amount'),\r\n                amount = parseInt(amountInput.val(), 10),\r\n                amountLimit = amountInput.attr('data-iamountlimit') ? parseInt(amountInput.attr('data-iamountlimit'), 10) : null;\r\n\r\n            if (amountLimit === 0) {\r\n                return;\r\n            }\r\n            \r\n            $this.find('.spinner').css({'display' : 'block'});\r\n            \r\n            jQuery.ajax({\r\n                url: url,\r\n                dataType: \"json\",\r\n                data: {\r\n                    cl: 'alist',\r\n                    fnc: 'tobasketArticleAjax',\r\n                    aid: anid,\r\n                    anid: anid,\r\n                    articleIdsJson: \"\",\r\n                    am: amount,\r\n                    stoken: stoken,\r\n                    lang: '0'\r\n                },\r\n                type: 'POST',\r\n                success: function (dataresponse) {\r\n                    var currentAmountContainer = jQuery('#jq_basketAmount'),\r\n                        currentAmountContainerSticky = jQuery('#jq_basketAmount_sticky');\r\n                        \r\n                    $this.find('.fl-add-to-cart-button').addClass('in-basket');\r\n                    $this.find('.spinner').css({'display' : 'none'});\r\n\r\n                    if (currentAmountContainer.length) {\r\n                        var currentAmount = currentAmountContainer.text(),\r\n                            newAmount = parseInt(currentAmount, 10) + amount;\r\n                        \r\n                        currentAmountContainer.text(newAmount);\r\n                        currentAmountContainerSticky.text(newAmount);\r\n                    } else {\r\n                        newAmountContainer = jQuery('<div\/>', { id: 'jq_basketAmount', 'class': 'amount' });\r\n                        \r\n                        jQuery('#jq_widgetContainer_miniBasket > div').append(newAmountContainer.text(amount));\r\n                        jQuery('.sticky-header .fa-shopping-cart').parent('.iconbutton').parent('div').append(newAmountContainer.text(amount));\r\n                    }\r\n                    \r\n                    if (amountLimit) {\r\n                        var newAmountLimit = amountLimit - amount;\r\n                        newAmountLimit = newAmountLimit < 0 ? 0 : newAmountLimit;\r\n                        \r\n                        amountInput.attr('data-iamountlimit', newAmountLimit);\r\n                        \r\n                        if (amount > newAmountLimit) {\r\n                            amountInput.val(newAmountLimit);\r\n                            $this.find('.stock-am-limit-message').show();\r\n                        }\r\n                    }\r\n                }\r\n            });\r\n        });\r\n    });\r\n\r\n\r\n    \/* FILTERS MANIPULATION ON MOBILE\r\n    *\/\r\n    if (FINDOLOGICLibrary.windowWidth < 768) {\r\n        jQuery('.fl-chosen-filters-bar').prependTo(jQuery('.fl-filters-wrapper-list'));\r\n\r\n        \/\/ Mobile FINDO filters open\r\n        jQuery('.fl-filter-button').on('click', function() {\r\n            sessionStorage.setItem('flFilterMobile', 'true');\r\n\r\n            jQuery('.filter.fl-filters-placeholder').addClass('fl-open');\r\n            jQuery('body').addClass('fl-fixed');\r\n        });\r\n\r\n        \/\/ Mobile FINDO filters close\r\n        jQuery('.fl-mobile-filter-button-close').on('click', function() {\r\n            sessionStorage.removeItem('flFilterMobile');\r\n\r\n            jQuery('.filter.fl-filters-placeholder').removeClass('fl-open');\r\n            jQuery('body').removeClass('fl-fixed');\r\n        });\r\n    } else {\r\n        \/\/ FINDO filters toggle via button on Desktop\r\n        jQuery('.fl-filter-button').on('click', function() {\r\n            jQuery('.fl-filters-placeholder').toggleClass('open');\r\n            jQuery('.fl-filters-wrapper-list').toggle();\r\n        });\r\n    } \r\n\r\n    \/\/ Update sticky values\r\n    var cartValue = jQuery('header #jq_basketAmount').text();\r\n    jQuery('.sticky-header #jq_basketAmount_sticky').html(cartValue);\r\n\r\n}\r\n\r\n\/* Function for url reading\r\n*\/\r\nfunction getURLParam(name) {\r\n    var results = new RegExp('[\\?&]' + name + '=([^&#]*)').exec(window.location.href);\r\n\r\n    if (results) {\r\n        return results[1];\r\n    }\r\n\r\n    return 0;\r\n};\r\n\r\nflRequire(['config'], function (config) {\r\n    document.dispatchEvent(new CustomEvent('fl-post-search-success', {\r\n        detail: {\r\n            params: queryParams,\r\n            shopkey: config.shopkey\r\n        }\r\n    }));\r\n}); \n}","error":"function directIntegrationErrorCallback(response) {  \n}","navigationSuccess":"function directIntegrationNavigationSuccessCallback(response, resultsAvailable, queryParams) {  \n}","preNavigation":"function directIntegrationPreNavigationCallback(queryString) {  \n}"}},"assistedSuggest":{"text":{"searchInsteadLabel":"Stattdessen nach \"%s\" suchen","topQueriesLabel":"Top Suchanfragen","usedQueryLabel":"Suchergebnisse f\u00fcr \"%s\"","totalResultsLabel":"%s Produkte gefunden"}},"guidedShoppingModule":"wizard","cdnBaseUrl":"\/\/cdn.findologic.com\/login.symfony\/web","cacheBuster":"1611650324","trackMerchandisingFeatures":!0,"trackSmartSuggest":!0,"trackFilters":!0,"trackResultsWithFindologic":!0,"trackResultsWithAnalytics":!0,"tracking":{"analytics":{"implementationOverride":null}},"useErrorTracking":!0,"errorTracker":"raven","ravenConfig":{"serviceUrl":"https:\/\/3d7c53c04c7e4ff791dcf5aa3b1be845@sentry.io\/68096","scriptWhitelist":"cdn.findologic.com"}};var constants={STAGING_HINT_MESSAGE:'Staging enabled.',STAGING_HINT_DISABLE_MESSAGE:'Disable Findologic',IDENTITY_NAME:'findologic-identity',IDENTITY_IN_ERROR_CASE:'00000000-0000-0000-0000-000000000000',STAGING_FLAG_NAME:'findologic-staging',FALLBACK_FLAG_NAME:'findologic-fallback-start',FALLBACK_EXPIRATION_INTERVAL:10*60*1000,ERROR_TRACKER_CALLBACK_TAG:'callback',STATUS_INACTIVE:'inactive',STATUS_ACTIVE:'active',STATUS_CANCELLED:'cancelled',SMART_SUGGEST_TYPE_RESULT_V3:'result_v3',SHOP_URL:'shopurl',SHOP_KEY:'shopkey',QUERY_PARAMS_USER_ID:'userId',QUERY_PARAMS_REQUEST_ID:'requestId',INIT_RETRY_INTERVAL_MS:500,MAX_INIT_RETRIES:10};var container={};var localStorage=window.localStorage;delete window.findologicReady;function isFindologicEnabled(config){var isEnabled;if(config.status!==constants.STATUS_ACTIVE){isEnabled=!1;if(config.status===constants.STATUS_INACTIVE){console.warn('FINDOLOGIC has been disabled temporarily.')}else if(config.status===constants.STATUS_CANCELLED){}}else if(config.isStagingShop===!0){var queryParams=window.location.search;var historyReplaceState=typeof(window.history.replaceState)==='undefined'?function(){}:window.history.replaceState.bind(window.history);if(queryParams.indexOf('findologic=on')>-1){isEnabled=!0;try{localStorage.setItem(constants.STAGING_FLAG_NAME,'on')}catch(e){var msg='Could not enable findologic-staging mode because localStorage is not available in your browser.';msg+=' In case the private/icognito mode is active in your browser, please disable it.';msg+=' Error message: '+e;console.warn(msg)}}else if(queryParams.indexOf('findologic=off')>-1||queryParams.indexOf('findologic=disabled')>-1){isEnabled=!1;disableStaging(historyReplaceState,localStorage)}else{isEnabled=restoreFindologicFromStagingFlag(historyReplaceState,localStorage)}}else{isEnabled=!0}
return isEnabled}
function disableStaging(historyReplaceState){localStorage.removeItem(constants.STAGING_FLAG_NAME);var fixedUrl=window.location.search.replace(/findologic=(off|disabled)/,'');historyReplaceState(undefined,document.title,fixedUrl)}
function restoreFindologicFromStagingFlag(historyReplaceState){var isEnabled=localStorage.getItem(constants.STAGING_FLAG_NAME)==='on';if(isEnabled){var hash=window.location.hash;var parameterSeparator=window.location.search.length>0?'&':'?';var urlWithFindologicOn=window.location.pathname+window.location.search+parameterSeparator+'findologic=on'+hash;historyReplaceState(undefined,document.title,urlWithFindologicOn)}
return isEnabled}
function showStagingHint(){var body=document.querySelector('body');var stagingHint=document.createElement('div');stagingHint.setAttribute('style','margin-top: -2.55em; transition: margin-top .2s ease-in; height: 3.55em; font-size: 16px; opacity: 0;');stagingHint.className='fl-staging-hint';var queryParams=window.location.search;var disableLink;if(queryParams.indexOf('findologic=on')>-1){disableLink=queryParams.replace('findologic=on','findologic=disabled')}else{var parameterSeparator=window.location.search.length>0?'&':'?';disableLink=queryParams+parameterSeparator+'findologic=disabled'}
stagingHint.innerHTML=''+'<span class="fl-staging-logo"></span>'+'<span class="fl-staging-notice">'+constants.STAGING_HINT_MESSAGE+'</span>'+'<a href="'+disableLink+'">'+constants.STAGING_HINT_DISABLE_MESSAGE+'</a>';body.insertBefore(stagingHint,body.firstChild)}
function configureRequireJs(config,require,isShopWithDirectIntegration){config.requirejs={waitSeconds:30,baseUrl:config.cdnBaseUrl+'/js/autocomplete/src',urlArgs:'_='+config.cacheBuster,paths:{'jquery-ui':'utils/fl-jquery-ui-module','jquery-nc':'utils/fl-jquery','flUtils':'utils/utils','flAutocomplete':'modules/findologic-ac-2.0','baseShopSystem':'modules/shopsystem/base','jquery-ui-autocomplete':'modules/jquery-ui-autocomplete','frontend':'modules/frontend','directIntegration':'modules/direct-integration','jquery-ui-touchfix':'utils/jquery.ui.touch-punch.min','handlebars':'utils/handlebars','svgInjector':'utils/svg-injector','matchMedia':'utils/matchMedia','constants':'empty:','config':'empty:','container':'empty:'},map:{'*':{'shopSystem':'modules/shopsystem/'+config.shopSystem,'unmodifiedShopSystem':'modules/shopsystem/'+config.shopSystem,'wizard':'modules/'+config.guidedShoppingModule,'error-tracker':'modules/tracking/errors/'+config.errorTracker+'-error-tracker'}}};if(isShopWithDirectIntegration){config.requirejs.map['*'].shopSystem='modules/shopsystem/directIntegration'}
require.config(config.requirejs)}
function defineNamedModule(define,name,returnObject){define(name,[],function(){return returnObject})}
function deferredInitialization(config,require,FlAutocomplete,frontend,isShopWithDirectIntegration,wizard,jQuery,ErrorTracker,MobileSmartSuggest,container){if(isShopWithDirectIntegration){try{var initCallback=eval('('+config.directIntegration.callbacks.init+')');initCallback()}catch(e){console.warn('FINDOLOGIC is unavailable due to a faulty DI init callback: '+e);return}}
require(['flUtils'],function(FlUtil){initMSSAndDI(require,FlUtil,FlAutocomplete,config,isShopWithDirectIntegration,MobileSmartSuggest,container);reInitializeFindologicIfEventsAreDeleted(require,FlUtil,FlAutocomplete,config,isShopWithDirectIntegration,MobileSmartSuggest,container)});jQuery(document).ready(function(){wizard.init()});frontend.initializeFrontend(config.frontendConfig,config.cdnBaseUrl);frontend.initializeRangeSliders('#flFilterContainer');frontend.initializeRangeSliders('.fl-filter-container')}
function reInitializeFindologicIfEventsAreDeleted(require,FlUtil,FlAutocomplete,config,isShopWithDirectIntegration,MobileSmartSuggest,container){if(isEventOverridden()){return!1}
var customEventName='FINDOLOGICInputNotDeleted';var customEvent=new Event(customEventName,{});var eventIsMissing=!0;try{var searchForm=FlUtil.getSearchFieldElements().parents('form')[0];searchForm.addEventListener(customEventName,function(){eventIsMissing=!1})}catch(e){return}
var waitInterval=setInterval(function(){eventIsMissing=!0;searchForm=FlUtil.getSearchFieldElements().parents('form')[0];searchForm.dispatchEvent(customEvent);if(eventIsMissing){clearInterval(waitInterval);config.searchFieldElement=FlUtil.getSearchFieldElements();initMSSAndDI(require,FlUtil,FlAutocomplete,config,isShopWithDirectIntegration,MobileSmartSuggest,container,!0)}},constants.INIT_RETRY_INTERVAL_MS);setTimeout(function(){clearInterval(waitInterval)},(constants.INIT_RETRY_INTERVAL_MS*constants.MAX_INIT_RETRIES))}
function isEventOverridden(){return!RegExp('native code').test(window.Event.toString())}
function initMSSAndDI(require,FlUtil,FlAutocomplete,config,isShopWithDirectIntegration,MobileSmartSuggest,container,triggeredByReinitialization){if(FlUtil.isMobile(config)&&config.mobileSmartSuggest.config.enabled){container.mobileSmartSuggest=new MobileSmartSuggest({});initializeDirectIntegration(require,isShopWithDirectIntegration,triggeredByReinitialization,FlUtil)}else{switch(config.autocompleteLayout){case 'Classic':FlAutocomplete.init(config,isShopWithDirectIntegration,function(){initializeDirectIntegration(require,isShopWithDirectIntegration,triggeredByReinitialization,FlUtil)});break;case 'Assisted Suggest':require(['../tscoba/fl_dist/LayoutAssistedSuggest'],function(assistedSuggest){initializeDirectIntegration(require,isShopWithDirectIntegration,triggeredByReinitialization,FlUtil);assistedSuggest.init()});break;default:initializeDirectIntegration(require,isShopWithDirectIntegration,triggeredByReinitialization,FlUtil);break}}}
function requireDependenciesAndLaunch(require,config,isShopWithDirectIntegration){require(['findologic'],function(){require(['flAutocomplete','jquery-nc','wizard','frontend','flUtils','error-tracker','modules/mobile-smart-suggest','LayoutAssistedSuggestHooks'],function(FlAutocomplete,jQuery,wizard,frontend,FlUtil,ErrorTracker,MobileSmartSuggest,LayoutAssistedSuggestHooks){window.jQueryFl=jQuery;FlAutocomplete.shopConfig=config;FlAutocomplete.log=FlUtil.Logger;config.searchFieldElement=FlUtil.getSearchFieldElements();require(['flAutocomplete'],function(FlAutocomplete){FlAutocomplete.loadModules()});var cssFile=config.cssFile;if(cssFile){if(cssFile instanceof Array){jQuery.each(cssFile,function(i,cssUrl){frontend.loadCss(cssUrl,'fl-smart-suggest-css')})}else{frontend.loadCss(cssFile,'fl-smart-suggest-css')}}else{FlUtil.Logger.warn('No CSS file specified in FINDOLOGIC autocompleteConfig')}
if(config.searchFieldElement.length){deferredInitialization(config,require,FlAutocomplete,frontend,isShopWithDirectIntegration,wizard,jQuery,ErrorTracker,MobileSmartSuggest,container)}else{jQuery(document).ready(function(){deferredInitialization(config,require,FlAutocomplete,frontend,isShopWithDirectIntegration,wizard,jQuery,ErrorTracker,MobileSmartSuggest,container)})}
jQuery(window).on('pageshow',function(evt){if(evt.originalEvent.persisted){frontend.initializeFrontend(config.frontendConfig,config.cdnBaseUrl)}})})})}
function initializeFindologic(require,config,xhr){if(!isFindologicEnabled(config)){if(typeof window.flRevealContainers==='function'){window.flRevealContainers()}
return}else if(config.isStagingShop===!0){showStagingHint()}
if(typeof xhr==='undefined'){xhr=new XMLHttpRequest()}
var isShopWithDirectIntegration=config.directIntegration&&config.directIntegration.enabled;configureRequireJs(config,require,isShopWithDirectIntegration);defineNamedModule(flRequireObject.define,'constants',constants);defineNamedModule(flRequireObject.define,'config',config);defineNamedModule(flRequireObject.define,'container',container);if(config.isStagingShop===!1){var fallbackStartedAt=localStorage.getItem(constants.FALLBACK_FLAG_NAME);if(fallbackStartedAt!==null){var timeSinceFallback=new Date()-new Date(fallbackStartedAt);var timeUntilExpiration=constants.FALLBACK_EXPIRATION_INTERVAL-timeSinceFallback;if(timeUntilExpiration>0){var timeUntilExpirationDate=new Date(timeUntilExpiration);console.warn('FINDOLOGIC is temporarily disabled for '+timeUntilExpirationDate.getMinutes()+' minutes and '+timeUntilExpirationDate.getSeconds()+' seconds.');return}else{localStorage.removeItem(constants.FALLBACK_FLAG_NAME)}}
requireDependenciesAndLaunch(require,config,isShopWithDirectIntegration)}else{xhr.onreadystatechange=function(){if(this.readyState===XMLHttpRequest.DONE){if(this.status===200){config=JSON.parse(xhr.responseText);defineNamedModule(flRequireObject.define,'config',config);requireDependenciesAndLaunch(require,config,isShopWithDirectIntegration)}else{requireDependenciesAndLaunch(require,config,isShopWithDirectIntegration)}}};xhr.open('GET',config.configUrl+'?_='+new Date().getTime());xhr.send()}}
function initializeDirectIntegration(require,isShopWithDirectIntegration,triggeredByReinitialization,FlUtil){if(isShopWithDirectIntegration){require(['directIntegration'],function(directIntegration){directIntegration.init(undefined,triggeredByReinitialization);triggerReadyEvent(FlUtil)})}}
function triggerReadyEvent(FlUtil){window.findologicReady=!0;if(isEventOverridden()){var errorMsg='The Event "findologicReady" could not be triggered because window.Event was overridden';FlUtil.Logger.warn(errorMsg);return!1}
document.dispatchEvent(new Event('findologicReady'))}
initializeFindologic(require,config)}(flRequire))